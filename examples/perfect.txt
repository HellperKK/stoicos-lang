; Tells if x is a divisor of y
(deffun :is_divisor [:x :y] {
  (== 0 (% y x))
})

; Gets all divisors of num except itself
(deffun :divisors [:num] {
  (Array.filter (fun [:x] {(is_divisor x num)}) (Array.make_range 1 num))
})

(deffun :sum [:nums] {
  (Array.fold_left + 0 nums)
})

(deffun :is_perfect [:num] {
  (|> num [
    divisors
    sum
    (#== num)
  ])
})

(println (is_perfect 6)) ; true
(println (is_perfect 12)) ; false